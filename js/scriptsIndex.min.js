var $cacheAudio,$cacheProgress,playerWasPaused,playerUpdateInterval,playerUpdateTimeout,playerPreviousVolume,playerLoaded=playerBinded=playerHover=!1,playerInt=!0;function formatTime(a){a=Number(a);var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%3600%60);return(10>b?"0":"")+b+":"+(10>c?"0":"")+c+":"+(10>a?"0":"")+a}
function playerBind(){playerBinded=!0;$cachePlayer=$("#headerplayer");$cachePlayer.title=$cachePlayer.find("h1 a");$cachePlayer.date=$cachePlayer.find("h2 a");$cachePlayer.background=$("#header");$cachePlayer.header=$cachePlayer.background.find("#headerMenu");$cacheAudio=$cachePlayer.find("#playerAudio");$cacheVolume=$cachePlayer.find("#playerVolume");$cacheVolume.button=$cacheVolume.find("#playerVolume-toggle");$cacheVolume.slider=$cacheVolume.find("#playerVolume-slider");$cacheProgress=$cachePlayer.find("#playerProgress");
$cacheProgress.cover=$cacheProgress.find(".cover");$cacheProgress.line=$cacheProgress.find(".line");$cacheTimestamp=$cachePlayer.find("#playerTime");$cacheTimestamp.current=$cacheTimestamp.find("#playerTime-current");$cacheTimestamp.total=$cacheTimestamp.find("#playerTime-total");$cacheAudio[0].volume=playerLastVolume=.8;$cacheProgress.mousemove(function(a){0!=playerLoaded&&(a=a.pageX/window.innerWidth,$cacheProgress.line.css("left",100*a-.25+"%"),$cacheTimestamp.current.html(formatTime($cacheAudio[0].duration*
a)))}).mouseover(function(){playerHover=!0}).mouseout(function(){playerHover=!1;playerUpdate()}).on("click",function(a){0!=playerLoaded&&($cacheAudio[0].currentTime=a.pageX/window.innerWidth*$cacheAudio[0].duration,clearTimeout(playerUpdateTimeout),$cacheProgress.cover.addClass("smooth"),playerUpdateTimeout=setTimeout(function(){$cacheProgress.cover.removeClass("smooth")},250),playerUpdate())});$cacheAudio[0].addEventListener("ended",function(){clearInterval(playerUpdateInterval);$cachePlayer.removeClass("playing")});
$cacheAudio[0].addEventListener("loadedmetadata",function(){$cacheTimestamp.current.html("00:00:00");$cacheTimestamp.total.html(formatTime($cacheAudio[0].duration));$cachePlayer.removeClass("loading");playerLoaded=!0;playerUpdate();1==playerInt&&($cachePlayer.removeClass("int"),playerInt=!1,playerToggle(event));0==playerWasPaused&&$cacheAudio[0].play()},!1);$cacheVolume.slider.on("input change",function(){$cacheAudio[0].volume=parseInt($cacheVolume.slider[0].value)/100;playerPreviousVolume=$cacheAudio[0].volume;
0==$cacheAudio[0].volume?$cacheVolume.addClass("muted"):$cacheVolume.removeClass("muted")})}function playerUpdate(){0!=playerLoaded&&(0==playerHover&&$cacheTimestamp.current.html(formatTime($cacheAudio[0].currentTime)),$cacheProgress.cover.css("width",$cacheAudio[0].currentTime/$cacheAudio[0].duration*100+"%"),1==$cacheAudio[0].ended&&clearInterval(playerUpdateInterval))}
function playerToggle(a){a.preventDefault();0==playerBinded&&playerBind();1==playerInt?($cachePlayer.addClass("loading"),$cacheAudio[0].load()):1==$cacheAudio[0].paused?($cacheAudio[0].play(),playerUpdate(),playerUpdateInterval=setInterval(playerUpdate,1E3),$cachePlayer.addClass("playing")):($cacheAudio[0].pause(),clearInterval(playerUpdateInterval),$cachePlayer.removeClass("playing"))}
function playerChange(a,b){a.preventDefault();0==playerBinded&&playerBind();b=$(b);$cachePlayer.addClass("loading");$("html, body").animate({scrollTop:0},"slow");playerWasPaused=$cacheAudio[0].paused;playerLoaded=!1;$cachePlayer.title.html(b.parent().find(".title").html());$cachePlayer.date.find("span").html(b.parent().find(".date").html());$cachePlayer.title.add($cachePlayer.date).attr("href",b.parent().find(".link").attr("href"));$cacheProgress.cover.css("width","0%");$cacheProgress.line.css("left",
"0%");1==playerInt&&(playerInt=!1,$cachePlayer.removeClass("int"));$cacheAudio.find("source").attr("src",b.attr("data-audio"));$cacheAudio[0].load();if(void 0!=b.attr("data-header")||void 0!=b.attr("data-background")){$cachePlayer.background.removeClass("noBackground");var c=new Image;c.src=b.attr("data-background");c.onload=function(){var a=new Image;a.src=b.attr("data-header");a.onload=function(){$cachePlayer.background.css("background-image","url("+c.src+")").css("background-color",b.attr("data-color"));
$cachePlayer.header.css("background-image","url("+a.src+")")}}}else $cachePlayer.background.addClass("noBackground")}function playerMute(a){a.preventDefault();0<$cacheAudio[0].volume?(playerPreviousVolume=$cacheVolume.slider[0].value,$cacheAudio[0].volume=$cacheVolume.slider[0].value=0,$cacheVolume.addClass("muted")):0<playerPreviousVolume&&($cacheVolume.slider[0].value=playerPreviousVolume,$cacheAudio[0].volume=playerPreviousVolume/100,$cacheVolume.removeClass("muted"))};